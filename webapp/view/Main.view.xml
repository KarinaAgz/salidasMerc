<mvc:View
    controllerName="logaligroup.mapeobapi.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    displayBlock="true">
    <TabContainer id="mainTabContainer" selectedKey="tabCabecera">
        <items>
            <!-- Pestaña Cabecera -->
            <TabContainerItem key="tabCabecera" title="Cabecera">
                <VBox>
                    <Select id="referenceType" change="onReferenceTypeChange" width="100%">
                        <core:Item key="reserva" text="Reserva" />
                        <core:Item key="orden" text="Orden" />
                        <core:Item key="otro" text="Otro" />
                    </Select>
                    <Input id="refDocNo" placeholder="Referencia" visible="{= ${mainModel>/header/reference_type} === 'reserva' || ${mainModel>/header/reference_type} === 'orden' ? true : false}" />
                    <DatePicker id="docDate" placeholder="Fecha Documento" value="{path: 'mainModel>/header/doc_date'}" />
                    <DatePicker id="pstngDate" placeholder="Fecha Contabilización" value="{path: 'mainModel>/header/pstng_date'}" />
                    <Input id="headerTxt" placeholder="Texto Cabecera" value="{path: 'mainModel>/header/header_txt'}" />
                    <Button text="Siguiente" press="onNext" />
                </VBox>
            </TabContainerItem>

            <!-- Pestaña Datos de Posición -->
            <TabContainerItem key="tabPosicion" title="Datos de Posición">
                <VBox>
                    <Input id="material" placeholder="Material (Escaneo)" value="{path: 'mainModel>/currentItem/material'}" />
                    <Input id="plant" placeholder="Planta" value="{path: 'mainModel>/currentItem/plant'}" />
                    <Input id="stgeLoc" placeholder="Almacén" value="{path: 'mainModel>/currentItem/stge_loc'}" />
                    <Input id="batch" placeholder="Lote" value="{path: 'mainModel>/currentItem/batch'}" />
                    <Input id="entryQnt" placeholder="Cantidad" value="{path: 'mainModel>/currentItem/entry_qnt'}" />
                    <Input id="entryUom" placeholder="Unidad Medida" value="{path: 'mainModel>/currentItem/entry_uom'}" />
                    <Input id="costcenter" placeholder="Centro Costo" visible="{= ${mainModel>/header/move_type} === '201' || ${mainModel>/header/move_type} === '551' ? true : false}" value="{path: 'mainModel>/currentItem/costcenter'}" />
                    <Input id="orderid" placeholder="Orden" visible="{= ${mainModel>/header/move_type} === '261' ? true : false}" value="{path: 'mainModel>/currentItem/orderid'}" />
                    <Select id="moveReas" placeholder="Motivo" visible="{= ${mainModel>/header/move_type} === '551' ? true : false}" items="{path: 'mainModel>/motivos'}" change="onMoveReasChange">
                        <core:Item key="{key}" text="{text}" />
                    </Select>
                    <Button text="Guardar" press="onSaveItem" />
                    <Button text="Nueva Entrada" press="onNewEntry" />
                </VBox>
            </TabContainerItem>

            <!-- Pestaña Orden Completa -->
            <TabContainerItem key="tabOrden" title="Orden Completa">
                <VBox>
                    <Table id="itemsTable" items="{path: 'mainModel>/items'}">
                        <columns>
                            <Column><Text text="Material" /></Column>
                            <Column><Text text="Planta" /></Column>
                            <Column><Text text="Almacén" /></Column>
                            <Column><Text text="Cantidad" /></Column>
                            <Column><Text text="UM" /></Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{material}" />
                                    <Text text="{plant}" />
                                    <Text text="{stge_loc}" />
                                    <Text text="{entry_qnt}" />
                                    <Text text="{entry_uom}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                    <Button text="Submit" press="onSubmit" />
                </VBox>
            </TabContainerItem>
        </items>
    </TabContainer>
</mvc:View>