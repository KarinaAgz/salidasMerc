<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout.form"
>
    <!-- Contenedor principal vertical -->
    <VBox
        id="_IDGenVBox1"
        width="100%"
        fitContainer="true"
        class="sapUiMediumMargin"
    >
        <!-- Resumen de la cabecera en un formulario de solo lectura -->
        <layout:SimpleForm
            id="headerSummaryForm"
            editable="false"
            layout="ResponsiveGridLayout"
            labelSpanL="3"
            labelSpanM="3"
            labelSpanS="12"
            adjustLabelSpan="false"
            emptySpanL="5"
            emptySpanM="5"
            emptySpanS="0"
            columnsL="1"
            columnsM="1"
            singleContainerFullSize="true"
            class="sapUiForm sapUiSizeCompact"
        >
            <layout:content>
                <!-- Etiqueta y texto para el tipo de movimiento -->
                <Label
                    id="moveTypeLabel"
                    text="{i18n>salida_mercancia}"
                    design="Bold"
                />
                <ToolbarSpacer/>
                <Text
                    id="moveTypeText"
                    text="{mainModel>/savedHeader/movementDescription}"
                    class="sapUiSmallMarginBottom"
                />
                <!-- Etiqueta y texto para la fecha del documento -->
                <Label
                    id="docDateLabel"
                    text="{i18n>fecha_doc}"
                    design="Bold"
                />
                <ToolbarSpacer/>
                <Text
                    id="docDateText"
                    text="{mainModel>/savedHeader/doc_date}"
                    class="sapUiSmallMarginBottom"
                />
                <!-- Etiqueta y texto para la fecha de contabilización -->
                <Label
                    id="pstngDateLabel"
                    text="{i18n>fecha_cont}"
                    design="Bold"
                />
                <ToolbarSpacer/>
                <Text
                    id="pstngDateText"
                    text="{mainModel>/savedHeader/pstng_date}"
                    class="sapUiSmallMarginBottom"
                />
                <!-- Etiqueta y texto para el documento de referencia -->
                <Label
                    id="refDocNoLabel"
                    text="{i18n>referencia}"
                    design="Bold"
                    visible="{oDisplayModel>/Header/referencia}"
                />
                <ToolbarSpacer/>
                <Text
                    id="refDocNoText"
                    text="{mainModel>/savedHeader/ref_doc_no}"
                    class="sapUiSmallMarginBottom"
                    visible="{oDisplayModel>/Header/referencia}"
                />
                <!-- Etiqueta y texto para el texto de cabecera -->
                <Label
                    id="headerTxtLabel"
                    text="{i18n>texto_cabecera}"
                    design="Bold"
                />
                <ToolbarSpacer/>
                <Text
                    id="headerTxtText"
                    text="{mainModel>/savedHeader/header_txt}"
                    class="sapUiSmallMarginBottom"
                />
                <!-- Contenedor para botones de acción -->
                <Label text=""/>
                <HBox
                    id="actionButtonsBox"
                    justifyContent="Center"
                    alignItems="Center"
                    width="100%"
                    class="sapUiMediumMarginTop sapUiSizeCompact"
                >
                    <!-- Botón para agregar un nuevo componente -->
                    <Button
                        id="addComponentButton"
                        text="{i18n>agregar}"
                        type="Success"
                        press=".onAddComponent"
                        icon="sap-icon://sys-add"
                        iconFirst="true"
                        width="95px"
                        class="sapUiTinyMarginEnd customCompactButton"
                        tooltip="{i18n>agregar_componente_tooltip}"
                    />
                    <!-- Separador visual -->
                    <ToolbarSeparator/>
                    <!-- Botón para reiniciar el proceso -->
                    <Button
                        id="resetProcessButton"
                        text="{i18n>reiniciar}"
                        type="Reject"
                        press=".onResetProcess"
                        icon="sap-icon://refresh"
                        iconFirst="true"
                        width="95px"
                        class="sapUiTinyMarginStart customCompactButton"
                        tooltip="{i18n>reiniciar_proceso_tooltip}"
                    />
                </HBox>
            </layout:content>
        </layout:SimpleForm>

        <!-- Contador de ítems registrados -->
        <HBox
            id="itemCountBox"
            alignItems="Center"
            class="sapUiSmallMarginTop"
        >
            <!-- Etiqueta para el contador -->
            <Label
                id="itemCountLabel"
                text="{i18n>total_items}"
                design="Bold"
            />
            <!-- Texto que muestra el número de ítems -->
            <Text
                id="itemCountText"
                text="{mainModel>/itemCount}"
                class="sapUiTinyMarginBegin"
            />
        </HBox>

        <!-- Tabla que muestra todos los ítems registrados -->
        <Table
            id="itemsTable"
            items="{mainModel>/Positions}"
            class="sapUiSmallMarginBottom"
            mode="SingleSelectMaster"
            growing="true"
            growingThreshold="10"
            noDataText="{i18n>noItemsFound}"
            selectionChange=".onItemSelected"
        >
            <columns>
                <!-- Columna para el material -->
                <Column
                    id="materialColumn"
                    width="auto"
                    hAlign="Left"
                >
                    <Label
                        id="materialColumnText"
                        text="{i18n>material}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para la descripción del material -->
                <Column
                    id="materialDescColumn"
                    width="auto"
                    hAlign="Left"
                >
                    <Label
                        id="materialDescColumnText"
                        text="{i18n>descripcion_material}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para la cantidad -->
                <Column
                    id="cantidadColumn"
                    width="auto"
                    hAlign="Right"
                >
                    <Label
                        id="cantidadColumnText"
                        text="{i18n>cantidad}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para la unidad de medida -->
                <Column
                    id="umColumn"
                    width="auto"
                    hAlign="Center"
                >
                    <Label
                        id="umColumnText"
                        text="{i18n>um}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el lote -->
                <Column
                    id="batchColumn"
                    width="auto"
                    hAlign="Center"
                >
                    <Label
                        id="batchColumnText"
                        text="{i18n>lote}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el centro -->
                <Column
                    id="centroColumn"
                    width="auto"
                    hAlign="Center"
                >
                    <Label
                        id="centroColumnText"
                        text="{i18n>centro}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el almacén -->
                <Column
                    id="almacenColumn"
                    width="auto"
                    hAlign="Center"
                >
                    <Label
                        id="almacenColumnText"
                        text="{i18n>almacen}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el centro de costo -->
                <Column
                    id="costcenterColumn"
                    width="auto"
                    hAlign="Center"
                    visible="{oDisplayModel>/Posiciones/ceco}"
                >
                    <Label
                        id="costcenterColumnText"
                        text="{i18n>ceco}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el motivo -->
                <Column
                    id="motivoColumn"
                    width="auto"
                    hAlign="Left"
                    visible="{oDisplayModel>/Posiciones/motivo}"
                >
                    <Label
                        id="motivoColumnText"
                        text="{i18n>motivo}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el texto de posición -->
                <Column
                    id="txtPosicionColumn"
                    width="auto"
                    hAlign="Left"
                >
                    <Label
                        id="txtPosicionColumnText"
                        text="{i18n>txt_posicion}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para el documento de material -->
                <Column
                    id="materialDocumentColumn"
                    width="auto"
                    hAlign="Left"
                >
                    <Label
                        id="materialDocumentColumnText"
                        text="{i18n>num_docto}"
                        design="Bold"
                    />
                </Column>
                <!-- Columna para la acción de eliminar -->
                <Column
                    id="actionColumn"
                    width="120px"
                    hAlign="Center"
                >
                    <Label
                        id="actionColumnText"
                        text="{i18n>eli}"
                        design="Bold"
                    />
                </Column>
            </columns>
            <items>
                <!-- Fila de la tabla para cada ítem -->
                <ColumnListItem
                    id="itemRow"
                    type="Active"
                    press=".onItemSelected"
                >
                    <cells>
                        <!-- Celda para el material -->
                        <Text
                            id="materialCell"
                            text="{mainModel>material}"
                        />
                        <!-- Celda para la descripción del material -->
                        <Text
                            id="materialDescCell"
                            text="{mainModel>txt_material}"
                        />
                        <!-- Celda para la cantidad -->
                        <Text
                            id="cantidadCell"
                            text="{mainModel>cantidad}"
                        />
                        <!-- Celda para la unidad de medida -->
                        <Text
                            id="umCell"
                            text="{mainModel>um}"
                        />
                        <!-- Celda para el lote -->
                        <Text
                            id="batchCell"
                            text="{mainModel>batch}"
                        />
                        <!-- Celda para el centro -->
                        <Text
                            id="centroCell"
                            text="{mainModel>centro}"
                        />
                        <!-- Celda para el almacén -->
                        <Text
                            id="almacenCell"
                            text="{mainModel>almacen}"
                        />
                        <!-- Celda para el centro de costo -->
                        <Text
                            id="costcenterCell"
                            text="{mainModel>costcenter}"
                        />
                        <!-- Celda para el motivo -->
                        <Text
                            id="motivoCell"
                            text="{mainModel>motivo}"
                        />
                        <!-- Celda para el texto de posición -->
                        <Text
                            id="txtPosicionCell"
                            text="{mainModel>txt_posicion}"
                            wrapping="true"
                        />
                        <!-- Celda para el documento de material -->
                        <Text
                            id="materialDocumentCell"
                            text="{mainModel>MaterialDocument}"
                        />
                        <!-- Botón para eliminar el ítem -->
                        <Button
                            id="deleteButton"
                            icon="sap-icon://delete"
                            press=".onDeleteItem"
                            type="Reject"
                            tooltip="{i18n>eliminar_item}"
                        />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </VBox>
</core:FragmentDefinition>